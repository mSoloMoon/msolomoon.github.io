<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: java-android | 月光独奏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta property="og:type" content="website">
<meta property="og:title" content="月光独奏">
<meta property="og:url" content="http://yoursite.com/categories/java-android/">
<meta property="og:site_name" content="月光独奏">
<meta property="og:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="月光独奏">
<meta name="twitter:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">

  
    <link rel="alternative" href="/atom.xml" title="月光独奏" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">月光独奏</a></h1>
		</hgroup>

		
		<p class="header-subtitle">软件设计及开发者</p>
		

		
			<div class="onoffswitch">
			    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
			    <label class="onoffswitch-label" for="myonoffswitch">
			        <span class="onoffswitch-inner"></span>
			        <span class="onoffswitch-switch"></span>
			    </label>
			</div>
		

		<div class="switch-area">
			<section class="first-part">
				<nav class="header-menu">
					<ul>
					
						<li><a href="/">主页</a></li>
			        
						<li><a href="/archives">所有文章</a></li>
			        
						<li><a href="/categories/随笔">随笔</a></li>
			        
						<li><a href="/categories/摘录">摘录</a></li>
			        
						<li><a href="/categories/书籍">书籍</a></li>
			        
						<li><a href="/categories/Web">Web</a></li>
			        
						<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
			        
						<li><a href="/categories/java-android">Java/Android</a></li>
			        
						<li><a href="/categories/project">Project</a></li>
			        
						<li><a href="/categories/程序员日志">程序员日志</a></li>
			        
						<li><a href="/about">关于</a></li>
			        
					</ul>
				</nav>
				<nav class="header-nav">
					<div class="social">
						
							<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
				        
							<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
				        
							<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
				        
							<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
				        
					</div>
				</nav>
			</section>
			
			
			<section class="second-part">
				<div class="widget tagcloud">
					<a href="/tags/Android/" style="font-size: 14.29px;">Android</a><a href="/tags/C/" style="font-size: 10.00px;">C++</a><a href="/tags/C-C/" style="font-size: 10.00px;">C/C++</a><a href="/tags/Go/" style="font-size: 10.00px;">Go</a><a href="/tags/IT问题录/" style="font-size: 10.00px;">IT问题录</a><a href="/tags/IT面试/" style="font-size: 15.71px;">IT面试</a><a href="/tags/Java/" style="font-size: 15.71px;">Java</a><a href="/tags/Java-Web/" style="font-size: 10.00px;">Java Web</a><a href="/tags/书籍/" style="font-size: 10.00px;">书籍</a><a href="/tags/历史/" style="font-size: 10.00px;">历史</a><a href="/tags/哲学/" style="font-size: 10.00px;">哲学</a><a href="/tags/思考/" style="font-size: 12.86px;">思考</a><a href="/tags/持续集成/" style="font-size: 15.71px;">持续集成</a><a href="/tags/摘录/" style="font-size: 14.29px;">摘录</a><a href="/tags/生活记录/" style="font-size: 17.14px;">生活记录</a><a href="/tags/软件开发/" style="font-size: 20.00px;">软件开发</a><a href="/tags/软件框架/" style="font-size: 11.43px;">软件框架</a><a href="/tags/软件调试/" style="font-size: 10.00px;">软件调试</a><a href="/tags/金融/" style="font-size: 10.00px;">金融</a><a href="/tags/随笔/" style="font-size: 18.57px;">随笔</a><a href="/tags/项目/" style="font-size: 12.86px;">项目</a>
				</div>
			</section>
			
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">月光独奏</a></h1>
			</hgroup>
			
			<p class="header-subtitle">软件设计及开发者</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/随笔">随笔</a></li>
		        
					<li><a href="/categories/摘录">摘录</a></li>
		        
					<li><a href="/categories/书籍">书籍</a></li>
		        
					<li><a href="/categories/Web">Web</a></li>
		        
					<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
		        
					<li><a href="/categories/java-android">Java/Android</a></li>
		        
					<li><a href="/categories/project">Project</a></li>
		        
					<li><a href="/categories/程序员日志">程序员日志</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
			        
						<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
			        
						<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      
  
    <article id="post-learning-gradle-in-action-ii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/learning-gradle-in-action-ii/" class="article-date">
  	<time datetime="2014-11-17T17:43:29.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/learning-gradle-in-action-ii/">学习 Gradle —— Java 下一代构建工具（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>Gradle 构建生命期</strong><br>初始化阶段（initialization phase）：创建 Project 实例 -&gt;<br>配置阶段（configuration phase）：constructs a model representation of the tasks -&gt;<br>执行阶段（execution phase）</p>
</blockquote>
<h3 id="Gradle_构建脚本精要">Gradle 构建脚本精要</h3>
<blockquote>
<p>Gradle 构建的原理 -&gt; 基于 <strong>DDD（domain-driven design）</strong>进行建模。</p>
</blockquote>
<p><strong>构建模块</strong></p>
<ul>
<li>模块：项目（the Project interface）</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Build script conﬁguration</span></div><div class="line"><span class="function">apply</span>(options<span class="value">: Map&lt;String,?&gt;)</span></div><div class="line"><span class="function">buildscript</span>(conﬁg: Closure)</div><div class="line">//</div><div class="line">// Dependency management</div><div class="line"><span class="function">dependencies</span>(conﬁg: Closure)</div><div class="line">conﬁ<span class="function">gurations</span>(conﬁg: Closure)</div><div class="line"><span class="function">getDependencies</span>()</div><div class="line">getConﬁ<span class="function">gurations</span>()</div><div class="line">//</div><div class="line">// Properties</div><div class="line"><span class="function">getAnt</span>()</div><div class="line"><span class="function">getName</span>()</div><div class="line"><span class="function">getDescription</span>()</div><div class="line"><span class="function">getGroup</span>()</div><div class="line"><span class="function">getPath</span>()</div><div class="line"><span class="function">getVersion</span>()</div><div class="line"><span class="function">getLogger</span>()</div><div class="line"><span class="function">setDescription</span>(description: String)</div><div class="line"><span class="function">setVersion</span>(version: Object)</div><div class="line">//</div><div class="line">// File creation</div><div class="line">ﬁ<span class="function">le</span>(path: Object)</div><div class="line">ﬁ<span class="function">les</span>(paths: Object...)</div><div class="line">ﬁ<span class="function">leTree</span>(baseDir: Object)</div><div class="line">//</div><div class="line">// Task creation</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String)</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String, c: Closure)</div><div class="line"><span class="function">task</span>(name: String)</div><div class="line"><span class="function">task</span>(name: String, c: Closure)</div><div class="line">// 示例</div><div class="line"><span class="function">setDescription</span>(<span class="string">"myProject"</span>)                       </div><div class="line">println <span class="string">"Description of project $name: "</span> + project.description</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/18/learning-gradle-in-action-ii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-gradle-in-action-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/15/learning-gradle-in-action-i/" class="article-date">
  	<time datetime="2014-11-15T15:28:45.000Z" itemprop="datePublished">11月 15 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/15/learning-gradle-in-action-i/">学习 Gradle —— Java 下一代构建工具（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>高效软件工程的核心：自动化</strong><br>自动化构建类型及其进化史：请求式构建 -&gt; 触发式构建 -&gt; 计划式构建<br>自动化构建工具要素 ：任务（DAG - Directed Acyclic Graph，即一段可工作的构件单元 + 依赖）、依赖管理</p>
</blockquote>
<h3 id="Gradle_箴言">Gradle 箴言</h3>
<ul>
<li><strong>让不可行变得可行，让可行变得易行，让易行变得简洁</strong></li>
<li>Maven VS Gradle</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">			<span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">			<span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0</span></div><div class="line">				http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</div><div class="line">	<span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.mycompany.app<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>my-app<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></div></pre></td></tr></table></figure>



<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line"><span class="keyword">group</span> = <span class="string">'com.mycompany.app'</span></div><div class="line">archivesBaseName = <span class="string">'my-app'</span></div><div class="line">version = <span class="string">'1.0-SNAPSHOT'</span></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">	mavenCentral()</div><div class="line">}</div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">	testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/15/learning-gradle-in-action-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-iii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/13/android-interview-iii/" class="article-date">
  	<time datetime="2014-11-13T02:10:53.000Z" itemprop="datePublished">11月 13 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/13/android-interview-iii/">Android 面试题记录 （三）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_关于_Service_的一些细节">1. 关于 Service 的一些细节</h3>
<ul>
<li>Service 的种类：Started Service 和 Bound Service，分别对应于 Context.startService(Intent) 和 Context.bindService；</li>
<li>如果一个 Service 在 onStartCommand 执行的过程中被终止，则已提交的 Intent 将得不到机会启动，该 Intent 仍会被视为一个挂起的请求，而非一个已启动的请求（started request）；</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Started Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartedEatService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span>(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId) { ... }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="keyword">return</span> <span class="keyword">null</span>; }</div><div class="line">}</div><div class="line"><span class="comment">// return value of onStartCommand:</span></div><div class="line"><span class="comment">// 1. START_STICKY，Service 将以新进程的形式予以重新启动而不管是否有任何挂起的请求，</span></div><div class="line"><span class="comment">// 被终止的请求将不会重新提交，如果有挂起的请求，flags 值将被设置为 START_FLAG_RETRY，</span></div><div class="line"><span class="comment">// 如果没有任何挂起的请求，重新启动后，onStartCommand 的 Intent 值为 null；</span></div><div class="line"><span class="comment">// 2. START_NOT_STICKY，与上一个 flag 相同，但有一个区别是，Service 只在有挂起的请求时才重新启动；</span></div><div class="line"><span class="comment">// 3. START_REDELIVER_INTENT，将为那些挂起的请求或正在执行的而没有完成的请求重新启动，</span></div><div class="line"><span class="comment">// 其中挂起的请求，flags 值将设置为START_FLAG_RETRY，而未完成的请求则为 START_FLAG_REDELIVERY；</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="comment">/* Return communication interface */</span> }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onUnbind</span>(Intent intent) { <span class="comment">/* Last component has unbound */</span> }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>Local Binding</strong></p>

        
          <p class="article-more-link">
            <a href="/2014/11/13/android-interview-iii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-ii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/12/android-interview-ii/" class="article-date">
  	<time datetime="2014-11-12T03:04:46.000Z" itemprop="datePublished">11月 12 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/12/android-interview-ii/">Android 面试题记录（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_管理基本线程的生命期">1. 管理基本线程的生命期</h3>
<p><strong>生命期</strong> ：New -&gt; Runnable -&gt; Blocked/Waiting（Thread.sleep() | Thread.yield()） -&gt; Terminated</p>
<p>Uncaught Exceptions</p>
<ul>
<li>Thread global handler：static void setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler handler);</li>
<li>Thread local handler：void setUncaughtExceptionHandler(Thread.UncaughtExceptionHandler handler);</li>
<li>Unhandled Exceptions on the UI Thread，参见<a href="http://msolomoon.github.io/2014/11/09/android-interview-i/" target="_blank" rel="external">面试题记录（一）</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>() {</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Unexpected error occurred"</span>);</div><div class="line">    }</div><div class="line">});</div><div class="line">t.setUncaughtExceptionHandler(<span class="keyword">new</span> Thread.UncaughtExceptionHandler() {</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span>(Thread thread, Throwable throwable) {</div><div class="line">        <span class="comment">// A basic logging of the message. Could be replaced by log to file or a network post.</span></div><div class="line">        Log.d(TAG, throwable.toString());</div><div class="line">    }</div><div class="line">});</div><div class="line">t.start();</div></pre></td></tr></table></figure>

<p><strong>在 Activity 中保持线程</strong></p>
<ul>
<li>public Object onRetainNonConfigurationInstance()：Called by the platform before a configuration change occurs, the implementation should return any object that you want to be retained across a configuration change (e.g., a thread) and passed to the new  Activity object.</li>
<li>public Object getLastNonConfigurationInstance()：Called by the platform before a configuration change occurs, it can be called in onCreate or onStart and returns null if the Activity is started for another reason than a configuration change.  </li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/12/android-interview-ii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/09/android-interview-i/" class="article-date">
  	<time datetime="2014-11-08T18:18:48.000Z" itemprop="datePublished">11月 9 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/09/android-interview-i/">Android 面试题纪录（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="目录">目录</h3>
<ol>
<li>JVM和DVM的不同</li>
<li>Android如何启动一个应用</li>
<li>UI Thread 如何工作</li>
<li>UI Thread 消息机制 API 概览</li>
<li>阐述 MessageQueue.IdleHandler</li>
<li>Android 平台如何调度线程</li>
<li>Android下线程有哪些通信方式</li>
<li>进程间如何通信</li>
<li>Android 如何管理内存 </li>
</ol>
<p><br></p>
<h3 id="1-_JVM和DVM的不同">1. JVM和DVM的不同</h3>
<ul>
<li>JVM is a stack-based machine; while DVM is register-based（执行相同任务比JVM使用更少的指令）;</li>
<li>A stack-based virtual machine must transfer data from registers to the operand stack before manipulating them. In contrast, a register-based VM operates by directly using virtual registers. This increases the relative size of instructions because they must specify which registers to use, but reduces the number of instructions that must be executed to achieve the same result.</li>
</ul>
<h3 id="2-_Android如何启动一个应用">2. Android如何启动一个应用</h3>
<p><img src="https://msolomoon.github.io/images/Zygote_VM_Startup.png" alt="Zygote启动应用流程"></p>
<ul>
<li>Android启动时将率先运行一个独特的进程<strong>Zygote</strong>。而Zygote将启动一虚拟机，该虚拟机将预先加载Android核心库并初始化各种共享资源体，最后它将使用套接字进行监听。 </li>
<li>当用户启动一个Android应用时，Zygote将创建一个虚拟机（通过写时复制（Copy-On-Write）的技术拷贝Zygote虚拟机）以便其运行，并以子进程的身份和其父进程共享内存。</li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/09/android-interview-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-voice-dev-no-interaction" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/02/android-voice-dev-no-interaction/" class="article-date">
  	<time datetime="2014-11-02T07:27:43.000Z" itemprop="datePublished">11月 2 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/02/android-voice-dev-no-interaction/">Android 语音开发（无交互）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a href="http://developer.android.com/reference/android/speech/tts/package-summary.html" target="_blank" rel="external">ANDROID SDK TTS Package Summary</a></p>
</blockquote>
<p><br></p>
<h3 id="Starting_the_TTS_engine">Starting the TTS engine</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">TextToSpeech tts = <span class="keyword">new</span> TextToSpeech(<span class="keyword">this</span>, <span class="keyword">new</span> OnInitListener() {</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInit</span>(<span class="keyword">int</span> status){ </div><div class="line">        <span class="keyword">if</span> (status == TextToSpeech.SUCCESS) </div><div class="line">              speak(<span class="string">"Hello world"</span>, TextToSpeech.QUEUE_ADD, <span class="keyword">null</span>); </div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>QUEUE_ADD: The new entry placed at the end of the playback queue.</li>
<li>QUEUE_FLUSH: All entries in the playback queue are dropped and replaced by the new entry.</li>
</ul>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initTTS</span>() { 		</div><div class="line">	disableSpeakButton(); 			<span class="comment">//Disable speak button during the initialization of the text to speech engine</span></div><div class="line">	</div><div class="line">	<span class="comment">//Check if a the engine is installed, when the check is finished, the onActivityResult method is executed</span></div><div class="line">	Intent checkIntent = <span class="keyword">new</span> Intent(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);  </div><div class="line">	startActivityForResult(checkIntent, TTS_DATA_CHECK); 		</div><div class="line">}</div><div class="line"></div><div class="line"><span class="javadoc">/**</span></div><div class="line"> *  Callback from check for text to speech engine installed</div><div class="line"> *  If positive, then creates a new &lt;code&gt;TextToSpeech&lt;/code&gt; instance which will be called when user clicks on the 'Speak' button</div><div class="line"> *  If negative, creates an intent to install a &lt;code&gt;TextToSpeech&lt;/code&gt; engine</div><div class="line">*/	</div><div class="line"><span class="annotation">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span>(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data) {  </div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (requestCode == TTS_DATA_CHECK) { 		</div><div class="line">		<span class="comment">// Check that the resultCode is CHECK_VOICE_DATA_PASS, it was the TTS which result is being processed and not any other activity</span></div><div class="line">		<span class="keyword">if</span> (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {  </div><div class="line">			tts = <span class="keyword">new</span> TextToSpeech(<span class="keyword">this</span>, <span class="keyword">new</span> OnInitListener() { 		<span class="comment">// Create a TextToSpeech instance  </span></div><div class="line">				<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInit</span>(<span class="keyword">int</span> status) {</div><div class="line">					<span class="keyword">if</span> ( (status == TextToSpeech.SUCCESS) &&  (tts.isLanguageAvailable(Locale.US) &gt;= <span class="number">0</span>) )	{</div><div class="line">							tts.setLanguage(Locale.US);</div><div class="line">					}</div><div class="line">					enableSpeakButton();</div><div class="line">				}</div><div class="line">			}); </div><div class="line">		} <span class="keyword">else</span> {  <span class="comment">// Install missing data  </span></div><div class="line">			PackageManager pm = getPackageManager();</div><div class="line">			Intent installIntent = <span class="keyword">new</span> Intent();</div><div class="line">			installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);</div><div class="line">			ResolveInfo resolveInfo = pm.resolveActivity( installIntent, PackageManager.MATCH_DEFAULT_ONLY );</div><div class="line"></div><div class="line">			<span class="keyword">if</span>( resolveInfo == <span class="keyword">null</span> ) {</div><div class="line">				Toast.makeText(TTSWithIntent.<span class="keyword">this</span>, </div><div class="line">											<span class="string">"There is no TTS installed, please download it from Google Play"</span>, </div><div class="line">											Toast.LENGTH_LONG).show();</div><div class="line">			} <span class="keyword">else</span> {</div><div class="line">			  startActivity( installIntent );</div><div class="line">			}</div><div class="line">		}  </div><div class="line">	}  </div><div class="line">}</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/02/android-voice-dev-no-interaction/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-play-framework-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/18/learning-play-framework-i/" class="article-date">
  	<time datetime="2014-10-18T01:20:20.000Z" itemprop="datePublished">10月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/">Java Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件框架/">软件框架</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/18/learning-play-framework-i/">学习 play! 框架（Part One）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Creating_a_new_application">Creating a new application</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ activator new my-first-app play-java	</div><div class="line">or</div><div class="line">$ activator new								<span class="comment"># prompt</span></div></pre></td></tr></table></figure>

<h2 id="The_standard_application_layout">The standard application layout</h2>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="input"><span class="prompt">app                    		-&gt;</span> <span class="constant">Application</span> sources</span></div><div class="line"> └ assets              -&gt; <span class="constant">Compiled</span> asset sources</div><div class="line"><span class="input"><span class="prompt">	└ stylesheets	-&gt;</span> <span class="constant">Typically</span> <span class="constant">LESS</span> <span class="constant">CSS</span> sources</span></div><div class="line"><span class="input"><span class="prompt">	└ javascripts    	-&gt;</span> <span class="constant">Typically</span> <span class="constant">CoffeeScript</span> sources</span></div><div class="line"> └ controllers     	      	-&gt; <span class="constant">Application</span> controllers</div><div class="line"><span class="input"><span class="prompt">	└ Application.java</span></span></div><div class="line"> └ models          		-&gt; <span class="constant">Application</span> business layer</div><div class="line"> └ views            	-&gt; <span class="constant">Templates</span></div><div class="line"><span class="input"><span class="prompt">	└ index.scala.html</span></span></div><div class="line">	└ main.scala.html</div><div class="line"> └ utils			-&gt; add your own packages here</div><div class="line"><span class="input"><span class="prompt">build.sbt          -&gt;</span> <span class="constant">Application</span> build script</span></div><div class="line"><span class="input"><span class="prompt">conf         	-&gt;</span> <span class="constant">Configurations</span> files and other non-compiled resources (on classpath)</span></div><div class="line"> └ application.conf    	  	-&gt; <span class="constant">Main</span> configuration file</div><div class="line"> └ routes                		-&gt; <span class="constant">Routes</span> definition</div><div class="line"><span class="input"><span class="prompt">public                   	-&gt;</span> <span class="constant">Public</span> assets</span></div><div class="line"> └ stylesheets           		-&gt; <span class="constant">CSS</span> files</div><div class="line"> └ javascripts           		-&gt; <span class="constant">Javascript</span> files</div><div class="line"> └ images                		-&gt; <span class="constant">Image</span> files</div><div class="line"><span class="input"><span class="prompt">project              	-&gt;</span> sbt configuration files</span></div><div class="line"> └ build.properties  	    	-&gt; <span class="constant">Marker</span> <span class="keyword">for</span> sbt project</div><div class="line"> └ plugins.sbt           		-&gt; sbt plugins including the declaration <span class="keyword">for</span> <span class="constant">Play</span> itself</div><div class="line"><span class="input"><span class="prompt">lib                      	-&gt;</span> <span class="constant">Unmanaged</span> libraries dependencies</span></div><div class="line"><span class="input"><span class="prompt">logs                     	-&gt;</span> <span class="constant">Standard</span> logs folder</span></div><div class="line"> └ application.log       		-&gt; <span class="constant">Default</span> log file</div><div class="line"><span class="input"><span class="prompt">target                   	-&gt;</span> <span class="constant">Generated</span> stuff</span></div><div class="line"> └ scala-<span class="number">2.10</span>.<span class="number">0</span>            	</div><div class="line"><span class="input"><span class="prompt">	└ cache              	</span></span></div><div class="line">	└ classes         		-&gt; <span class="constant">Compiled</span> <span class="class"><span class="keyword">class</span> <span class="title">files</span></span></div><div class="line"><span class="input"><span class="prompt">	└ classes_managed 		-&gt;</span> <span class="constant">Managed</span> <span class="class"><span class="keyword">class</span> <span class="title">files</span> (<span class="title">templates</span>, ...)</span></span></div><div class="line"><span class="input"><span class="prompt">	└ resource_managed		-&gt;</span> <span class="constant">Managed</span> resources (less, ...)</span></div><div class="line"><span class="input"><span class="prompt">	└ src_managed      		-&gt;</span> <span class="constant">Generated</span> sources (templates, ...)</span></div><div class="line"><span class="input"><span class="prompt">test                     	-&gt;</span> source folder for unit or functional tests</span></div><div class="line"> └ <span class="constant">ApplicationTest</span>.java</div><div class="line"> └ <span class="constant">IntegrationTest</span>.java</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/10/18/learning-play-framework-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
  

      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 月光独奏
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>