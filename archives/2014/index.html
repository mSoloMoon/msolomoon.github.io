<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014 | 月光独奏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta property="og:type" content="website">
<meta property="og:title" content="月光独奏">
<meta property="og:url" content="http://yoursite.com/archives/2014/">
<meta property="og:site_name" content="月光独奏">
<meta property="og:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="月光独奏">
<meta name="twitter:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">

  
    <link rel="alternative" href="/atom.xml" title="月光独奏" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">月光独奏</a></h1>
		</hgroup>

		
		<p class="header-subtitle">软件设计及开发者</p>
		

		
			<div class="onoffswitch">
			    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
			    <label class="onoffswitch-label" for="myonoffswitch">
			        <span class="onoffswitch-inner"></span>
			        <span class="onoffswitch-switch"></span>
			    </label>
			</div>
		

		<div class="switch-area">
			<section class="first-part">
				<nav class="header-menu">
					<ul>
					
						<li><a href="/">主页</a></li>
			        
						<li><a href="/archives">所有文章</a></li>
			        
						<li><a href="/categories/随笔">随笔</a></li>
			        
						<li><a href="/categories/摘录">摘录</a></li>
			        
						<li><a href="/categories/书籍">书籍</a></li>
			        
						<li><a href="/categories/Web">Web</a></li>
			        
						<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
			        
						<li><a href="/categories/java-android">Java/Android</a></li>
			        
						<li><a href="/categories/project">Project</a></li>
			        
						<li><a href="/categories/程序员日志">程序员日志</a></li>
			        
						<li><a href="/about">关于</a></li>
			        
					</ul>
				</nav>
				<nav class="header-nav">
					<div class="social">
						
							<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
				        
							<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
				        
							<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
				        
							<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
				        
					</div>
				</nav>
			</section>
			
			
			<section class="second-part">
				<div class="widget tagcloud">
					<a href="/tags/Android/" style="font-size: 15.00px;">Android</a><a href="/tags/C/" style="font-size: 11.25px;">C++</a><a href="/tags/C-C/" style="font-size: 11.25px;">C/C++</a><a href="/tags/Go/" style="font-size: 11.25px;">Go</a><a href="/tags/IT问题录/" style="font-size: 11.25px;">IT问题录</a><a href="/tags/IT面试/" style="font-size: 16.25px;">IT面试</a><a href="/tags/Java/" style="font-size: 16.25px;">Java</a><a href="/tags/Java-Web/" style="font-size: 11.25px;">Java Web</a><a href="/tags/书籍/" style="font-size: 11.25px;">书籍</a><a href="/tags/书籍笔记/" style="font-size: 10.00px;">书籍笔记</a><a href="/tags/历史/" style="font-size: 11.25px;">历史</a><a href="/tags/哲学/" style="font-size: 11.25px;">哲学</a><a href="/tags/思考/" style="font-size: 13.75px;">思考</a><a href="/tags/持续部署/" style="font-size: 10.00px;">持续部署</a><a href="/tags/持续集成/" style="font-size: 16.25px;">持续集成</a><a href="/tags/摘录/" style="font-size: 15.00px;">摘录</a><a href="/tags/生活记录/" style="font-size: 17.50px;">生活记录</a><a href="/tags/软件开发/" style="font-size: 20.00px;">软件开发</a><a href="/tags/软件框架/" style="font-size: 12.50px;">软件框架</a><a href="/tags/软件调试/" style="font-size: 11.25px;">软件调试</a><a href="/tags/金融/" style="font-size: 11.25px;">金融</a><a href="/tags/随笔/" style="font-size: 18.75px;">随笔</a><a href="/tags/项目/" style="font-size: 13.75px;">项目</a>
				</div>
			</section>
			
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">月光独奏</a></h1>
			</hgroup>
			
			<p class="header-subtitle">软件设计及开发者</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/随笔">随笔</a></li>
		        
					<li><a href="/categories/摘录">摘录</a></li>
		        
					<li><a href="/categories/书籍">书籍</a></li>
		        
					<li><a href="/categories/Web">Web</a></li>
		        
					<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
		        
					<li><a href="/categories/java-android">Java/Android</a></li>
		        
					<li><a href="/categories/project">Project</a></li>
		        
					<li><a href="/categories/程序员日志">程序员日志</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
			        
						<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
			        
						<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      
  
    <article id="post-project-stockeye-jenkins-android-notification-stockquote" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/19/project-stockeye-jenkins-android-notification-stockquote/" class="article-date">
  	<time datetime="2014-11-19T07:19:53.000Z" itemprop="datePublished">11月 19 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/项目/">项目</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/19/project-stockeye-jenkins-android-notification-stockquote/">Stockeye 持续集成之路 —— NotificationStockQuote 开发实录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关键字 ：Jenkins、Gradle、Jacoco、Android Studio、JUnit 和 Robolectri（只适用Android API Level 16、 17、18）</strong></p>
</blockquote>
<h3 id="预构">预构</h3>
<ul>
<li>故事点（Agile - Scrum）：用户可拉下通知框以查看实时股票信息</li>
<li>界面草图（见下图）</li>
<li>软件设计模式 ：观察者模式（Notification 为观察者，数据更新服务为目标，可能有多个不同类型观察者，考虑引进中介者模式以减轻服务管理依赖负担）</li>
<li>类：NotificationStockQuote，接口 -&gt; IObserverNotificationStockQuote，数据结构 -&gt; 二维数组（界面布局采取Listview）</li>
</ul>
<h3 id="项目配置和目录结构">项目配置和目录结构</h3>
<p><strong>项目 build.gradle</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">buildscript</span> {</div><div class="line">    <span class="keyword">repositories</span> {</div><div class="line">        jcenter()</div><div class="line">    }</div><div class="line">    <span class="keyword">dependencies</span> {</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:0.13.2'</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'org.robolectric:robolectric-gradle-plugin:0.13.+'</span></div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keyword">allprojects</span> {</div><div class="line">    <span class="keyword">repositories</span> {</div><div class="line">        jcenter()</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>目录结构</strong></p>
<p>`` bash<br>| build.gradle<br>| src<br>|   |- androidTest<br>|         |- java/com/msolo/stockeye/MainActivityTest.java<br>|         |- java/com/msolo/stockeye/StockeyeApplication.java<br>|   |- main<br>|         |- java/com/msolo/stockeye/MainActivity.java<br>|         |- java/com/msolo/stockeye/StockeyeApplication.java</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**app. build.gradle**</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- more --&gt;</span></div></pre></td></tr></table></figure>

<p> groovy<br>apply plugin: ‘com.android.application’</p>
<p>android {<br>    compileSdkVersion 18<br>    buildToolsVersion ‘19.1.0’</p>
<pre><code><span class="title">defaultConfig</span> {
    <span class="title">applicationId</span> <span class="string">"com.msolo.stockeye"</span>
    minSdkVersion <span class="number">16</span>
    targetSdkVersion <span class="number">18</span>
    versionCode <span class="number">1</span>
    versionName <span class="string">"1.0"</span>
}
buildTypes {
    <span class="title">release</span> {
        <span class="title">runProguard</span> <span class="built_in">false</span>
        proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span>
    }
}

packagingOptions {
    <span class="title">exclude</span> <span class="string">'META-INF/NOTICE'</span>
    exclude <span class="string">'META-INF/LICENSE'</span>
    exclude <span class="string">'META-INF/LICENSE.txt'</span>
    exclude <span class="string">'LICENSE.txt'</span>
}
</code></pre><p>}<br>dependencies {<br>    compile fileTree(dir: ‘libs’, include: [‘*.jar’])<br>    compile ‘com.android.support:support-v4:19+’</p>
<pre><code>androidTestCompile <span class="string">'org.hamcrest:hamcrest-integration:1.1'</span>
androidTestCompile <span class="string">'org.hamcrest:hamcrest-core:1.1'</span>
androidTestCompile <span class="string">'org.hamcrest:hamcrest-library:1.1'</span>

androidTestCompile(<span class="string">'junit:junit:4.+'</span>) {
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">hamcrest</span>-<span class="title">core</span>'</span>
}
androidTestCompile(<span class="string">'org.robolectric:robolectric:2.3'</span>) {
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">classworlds</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">commons</span>-<span class="title">logging</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">httpclient</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">artifact</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">artifact</span>-<span class="title">manager</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">error</span>-<span class="title">diagnostics</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">model</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">project</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">maven</span>-<span class="title">settings</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">plexus</span>-<span class="title">container</span>-<span class="title">default</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">plexus</span>-<span class="title">interpolation</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">plexus</span>-<span class="title">utils</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">support</span>-<span class="title">v4</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">wagon</span>-<span class="title">file</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">wagon</span>-<span class="title">http</span>-<span class="title">lightweight</span>'</span>
    exclude <span class="class"><span class="keyword">module</span>: '<span class="title">wagon</span>-<span class="title">provider</span>-<span class="title">api</span>'</span>
}
</code></pre><p>}<br>apply plugin: ‘robolectric’</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">*</span><span class="keyword">*</span>TDD 示范程序<span class="keyword">*</span><span class="keyword">*</span></div></pre></td></tr></table></figure>

<p> java<br>package com.msolo.stockeye;</p>
<p>import org.junit.Test;<br>import org.junit.runner.RunWith;<br>import org.robolectric.RobolectricTestRunner;</p>
<p>import static org.junit.Assert.assertEquals;</p>
<p>@RunWith(RobolectricTestRunner.class)<br>public class MainActivityTest {</p>
<pre><code>@Test
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testActivityDisplayHelloWorldSuccessful</span>() {

    String hello = <span class="keyword">new</span> MainActivity().getResources().getString(R.<span class="keyword">string</span>.hello_world);
    assertEquals(<span class="string">"Hello World!"</span>, hello);

}
</code></pre><p>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="strong">**示范测试**</span></div><div class="line"></div><div class="line"><span class="blockquote">&gt; E:\android_workspaces\TDDStockeye&gt;d:gradle-2.1\bin\gradle test</span></div><div class="line"><span class="blockquote">&gt; :app:preBuild                                                                    </span></div><div class="line"><span class="blockquote">&gt; :app:preDebugBuild                </span></div><div class="line"><span class="blockquote">&gt; :app:checkDebugManifest                </span></div><div class="line"><span class="blockquote">&gt; :app:prepareDebugDependencies                 </span></div><div class="line"><span class="blockquote">&gt; :app:compileDebugAidl UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:compileDebugRenderscript UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:generateDebugBuildConfig UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:generateDebugAssets UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:mergeDebugAssets UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:generateDebugResValues UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:generateDebugResources UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:mergeDebugResources UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:processDebugManifest UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:processDebugResources UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:generateDebugSources UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:compileDebugJava UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:compileTestDebugJava                                                                    </span></div><div class="line"><span class="blockquote">&gt; :app:processTestDebugResources UP-TO-DATE      </span></div><div class="line"><span class="blockquote">&gt; :app:testDebugClasses                 </span></div><div class="line"><span class="blockquote">&gt; :app:testDebug                                     </span></div><div class="line"><span class="blockquote">&gt; :app:test                 </span></div><div class="line"><span class="blockquote">&gt;                </span></div><div class="line">&gt; BUILD SUCCESSFUL</div><div class="line"><span class="blockquote">&gt;                </span></div><div class="line">&gt; Total time: 11.647 secs</div><div class="line"></div><div class="line"><span class="strong">**测试结果**</span>：file:///E:/android_workspaces/TDDStockeye/app/build/test-report/debug/index.html</div><div class="line"></div><div class="line">![](https://msolomoon.github.io/images/Project<span class="emphasis">_android_</span>stockeye<span class="emphasis">_notification_</span>stockquote_1.png)</div><div class="line">![](https://msolomoon.github.io/images/Project<span class="emphasis">_android_</span>stockeye<span class="emphasis">_notification_</span>stockquote_2.png)</div><div class="line"></div><div class="line"><span class="header">###NotificationStockQuote TDD###</span></div><div class="line"></div><div class="line"><span class="strong">**NotificationStockQuote 测试计划**</span></div><div class="line"></div><div class="line"><span class="bullet">1. </span>单例类 (代号：Annn，实际中不必这么繁琐！)</div><div class="line"><span class="bullet">2. </span>初始化（代号：Bnnn，获取 NOTIFICATION_SERVICE，）</div><div class="line"><span class="bullet">3. </span>To do...</div><div class="line"></div><div class="line"><span class="strong">**第01次（A001）**</span>：测试默认构造器为私有，【注：TDD 快速测试示范意义】</div></pre></td></tr></table></figure>

<p> java<br>// NotificationStockQuoteTest.java<br>@Test<br>public void testSingletonOfNotificationStockQuote() {<br>    notificationStockQuote = new NotificationStockQuote();<br>    NotificationStockQuote notificationStockQuoteAnother = new NotificationStockQuote();<br>    assertNotSame(notificationStockQuoteAnother, notificationStockQuote);<br>}<br>// NotificationStockQuote.java<br>public class NotificationStockQuote {<br>    private static NotificationStockQuote sInstance = null;<br>    private NotificationStockQuote() {}<br>    public static NotificationStockQuote getInstance() {<br>        return new NotificationStockQuote();<br>    }<br>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 结果预期：失败；NotificationStockQuote 类默认构造器可以在外部被调用。</div><div class="line"></div><div class="line">![](https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_3.png)</div><div class="line"></div><div class="line"><span class="keyword">*</span><span class="keyword">*</span>第02次（A002）<span class="keyword">*</span><span class="keyword">*</span>：测试默认构造器为私有，并且构造生成的对象为单例对象</div></pre></td></tr></table></figure>

<p> java<br>// NotificationStockQuoteTest.java<br>@Test<br>public void testSingletonOfNotificationStockQuote() {<br>    NotificationStockQuote notificationStockQuoteAnother = NotificationStockQuote.getInstance();<br>    notificationStockQuote = NotificationStockQuote.getInstance();<br>    assertSame(notificationStockQuoteAnother, notificationStockQuote);<br>}<br>// NotificationStockQuote.java<br>public class NotificationStockQuote {<br>    private static NotificationStockQuote sInstance = null;<br>    private NotificationStockQuote() {}<br>    public static NotificationStockQuote getInstance() {<br>        return new NotificationStockQuote();<br>    }<br>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">-<span class="ruby"> <span class="symbol">file:</span>/<span class="regexp">//</span><span class="constant">E</span><span class="symbol">:/android_workspaces/TDDStockeye/app/build/test-report/debug/index</span>.html</span></div><div class="line">-<span class="ruby"> 结果预期：失败；<span class="constant">NotificationStockQuote</span> 类默认构造器私有，但返回的对象不是单例。</span></div><div class="line"></div><div class="line">![](https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_4.png)</div><div class="line"></div><div class="line">**第03次（A003）**：测试默认构造器为私有，并且构造生成的对象为单例对象</div></pre></td></tr></table></figure>

<p> java<br>// NotificationStockQuoteTest.java<br>@Before<br>public void setUp() {<br>    notificationStockQuote = NotificationStockQuote.getInstance();<br>}<br>@Test<br>public void testSingletonOfNotificationStockQuote() {<br>    NotificationStockQuote notificationStockQuoteAnother = NotificationStockQuote.getInstance();<br>    assertSame(notificationStockQuoteAnother, notificationStockQuote);<br>}<br>// NotificationStockQuote.java<br>public class NotificationStockQuote {<br>    private static NotificationStockQuote sInstance = null;<br>    private NotificationStockQuote() {}<br>    public static NotificationStockQuote getInstance() {<br>        if (null == sInstance) {<br>            sInstance = new NotificationStockQuote();<br>        }<br>        return sInstance;<br>    }<br>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 结果预期：成功；NotificationStockQuote 类默认构造器私有，返回的对象是单例。</div><div class="line"></div><div class="line">![](https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_5.png) </div><div class="line"></div><div class="line"><span class="keyword">*</span><span class="keyword">*</span>第04次（B001）<span class="keyword">*</span><span class="keyword">*</span>：测试 NotificationStockQuote 完成对 Notification 服务管理对象的初始化</div></pre></td></tr></table></figure>

<p> java<br>// NotificationStockQuoteTest.java<br>@Test<br>public void testInit() {<br>    NotificationManager notificationManager = (NotificationManager) Robolectric.application.getSystemService(Context.NOTIFICATION_SERVICE);<br>    notificationStockQuote.init();<br>    NotificationStockQuote.HelperTestNotificationStockQuote helper = notificationStockQuote.new HelperTestNotificationStockQuote();<br>    assertNotNull(helper.getNotificationManager());<br>    assertSame(notificationManager, helper.getNotificationManager());<br>}<br>// NotificationStockQuote.java<br>public void init() {<br>}<br>/<em>*
 </em></p>
<ul>
<li>This is an inner class for helping test NotificationStockQuote,</li>
<li>and it should be delete in production.<br>*</li>
<li>Date   | Name    | Change<br>*————+—————————————————————————</li>
<li>141119 | mSolo   | REQ #001: add method getNotificationManager().<br><em>
</em>/<br>public class HelperTestNotificationStockQuote {<br> public HelperTestNotificationStockQuote() {}<br> public NotificationManager getNotificationManager() {<pre><code> <span class="keyword">return</span> notificationManager;
</code></pre> }<br>}</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 结果预期：失败；NotificationStockQuote 对象并没有完成对 Notification 服务管理对象的初始化。</div><div class="line"></div><div class="line">![](https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_6.png) </div><div class="line">![](https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_7.png) </div><div class="line"></div><div class="line"><span class="keyword">*</span><span class="keyword">*</span>第05次（B002）<span class="keyword">*</span><span class="keyword">*</span>：测试 NotificationStockQuote 完成对 Notification 对象的初始化</div></pre></td></tr></table></figure>

<p> java<br>@Test<br>public void testInit() {<br>    NotificationManager notificationManager = (NotificationManager) Robolectric.application.getSystemService(Context.NOTIFICATION_SERVICE);<br>    //notificationStockQuote.init();<br>    MimicNotificationStockQuote mimic = new MimicNotificationStockQuote();<br>    mimic.init();<br>    assertNotNull(mimic.notificationManager);<br>    assertSame(notificationManager, mimic.notificationManager);<br>}<br>/<em>*
 </em></p>
<ul>
<li>This is an inner class for mimic NotificationStockQuote.<br>*</li>
<li>Date   | Name    | Change<br>*————+—————————————————————————</li>
<li>141119 | mSolo   | REQ #001: mimic method init().<br><em>
</em>/<br>private class MimicNotificationStockQuote {<br> public NotificationManager notificationManager = null;<br> public MimicNotificationStockQuote() {}<br> public void init() {<pre><code><span class="attribute"> notificationManager </span>=<span class="string"> (NotificationManager)Robolectric.application.getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);</span>
</code></pre> }<br>}<br>// NotificationStockQuote.java<br>public void init() {<br> notificationManager = (NotificationManager) StockeyeApplication.getAppContext().getSystemService(Context.NOTIFICATION_SERVICE);<br>}<br>```</li>
</ul>
<ul>
<li>结果预期：成功；NotificationStockQuote 对象完成对 Notification 服务的初始化。【注：不是很严格的测试】</li>
</ul>
<p><img src="https://msolomoon.github.io/images/Project_android_stockeye_notification_stockquote_8.png" alt=""> </p>
<h3 id="未完待续">未完待续</h3>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-cpp-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/learning-cpp-i/" class="article-date">
  	<time datetime="2014-11-18T06:05:29.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-Cpp-Go/">C-Cpp-Go</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/书籍/">书籍</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/learning-cpp-i/">探索 C++ （一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>参考书籍：<br><strong>《Professional C++》、《C++ in Action》、《C++ 代码设计与重用》</strong><br><strong>《C++ 标准库》、《深度探索 C++ 对象模型》</strong><br><strong>《Modern C++ Programming with Test-Driven Development》、《Effective Modern C++》</strong></p>
</blockquote>
<h3 id="程序之母">程序之母</h3>
<p><strong>面向过程</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span></div><div class="line"><span class="keyword">int</span> main() </div><div class="line">{</div><div class="line">	std::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello World!"</span> &lt;&lt; std::endl;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>面向对象</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span></div><div class="line"><span class="keyword">class</span> HelloWorld</div><div class="line">{</div><div class="line">	<span class="keyword">public</span>:</div><div class="line">		HelloWorld() { std::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello "</span>; }</div><div class="line">		~HelloWorld() { <span class="built_in">std</span>:<span class="built_in">cout</span> &lt;&lt; <span class="string">"World!\n"</span>; }</div><div class="line">}</div><div class="line">HelloWorld helloWorld;</div><div class="line"><span class="keyword">int</span> main() { }</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/18/learning-cpp-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-project-stockeye-jenkins-calendarstock-lib" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/project-stockeye-jenkins-calendarstock-lib/" class="article-date">
  	<time datetime="2014-11-17T19:23:14.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/项目/">项目</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/project-stockeye-jenkins-calendarstock-lib/">持续集成之路 —— Stockeye CalendarStock 库开发实录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关键字 ：Jenkins、Gradle、JUnit、Jacoco、jar 包和库、TDD</strong></p>
</blockquote>
<h3 id="库项目结构">库项目结构</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">| build.gradle</div><div class="line">| src</div><div class="line">|   |- main</div><div class="line">|         |- java/com/msolo/stockeye/calendarstock/UtilCalTime.java</div><div class="line">|   |- test</div><div class="line">|         |- java/com/msolo/stockeye/calendarstock/UtilCalTimeTest.java</div></pre></td></tr></table></figure>

<h3 id="构建脚本（无_Jacoco）">构建脚本（无 Jacoco）</h3>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line">version = <span class="number">0.1</span></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">	mavenCentral()</div><div class="line">}</div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">	testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div><div class="line"><span class="keyword">task</span> libJavadocs(type: Javadoc) {</div><div class="line">	<span class="keyword">source</span> = <span class="keyword">sourceSets</span>.main.allJava</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Jenkins_项目配置（无_JaCoCo）">Jenkins 项目配置（无 JaCoCo）</h3>
<ul>
<li>项目名称：android_stockeye_cal_lib</li>
<li>源码管理：<a href="https://github.com/mSoloMoon/android_stockeye_calendar_lib.git" target="_blank" rel="external">https://github.com/mSoloMoon/android_stockeye_calendar_lib.git</a></li>
<li>构建触发器：Poll SCM -&gt; <em> </em> <em> </em> *</li>
<li>构建步骤1：Invoke Gradle script -&gt; Switch -&gt; clean build javadoc</li>
<li>构建后操作1：Publish JUnit test result report -&gt; XML -&gt; <em>*/build/test-results/</em>.xml</li>
<li>构建后操作2：Publish Javadoc -&gt; build/docs/javadoc/</li>
</ul>
<h3 id="持续集成（无_JaCoCo）">持续集成（无 JaCoCo）</h3>
<p><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_1.png" alt="项目首页"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_2.png" alt="测试结果总结"></p>

        
          <p class="article-more-link">
            <a href="/2014/11/18/project-stockeye-jenkins-calendarstock-lib/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-gradle-in-action-ii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/learning-gradle-in-action-ii/" class="article-date">
  	<time datetime="2014-11-17T17:43:29.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/learning-gradle-in-action-ii/">学习 Gradle —— Java 下一代构建工具（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>Gradle 构建生命期</strong><br>初始化阶段（initialization phase）：创建 Project 实例 -&gt;<br>配置阶段（configuration phase）：constructs a model representation of the tasks -&gt;<br>执行阶段（execution phase）</p>
</blockquote>
<h3 id="Gradle_构建脚本精要">Gradle 构建脚本精要</h3>
<blockquote>
<p>Gradle 构建的原理 -&gt; 基于 <strong>DDD（domain-driven design）</strong>进行建模。</p>
</blockquote>
<p><strong>构建模块</strong></p>
<ul>
<li>模块：项目（the Project interface）</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Build script conﬁguration</span></div><div class="line"><span class="function">apply</span>(options<span class="value">: Map&lt;String,?&gt;)</span></div><div class="line"><span class="function">buildscript</span>(conﬁg: Closure)</div><div class="line">//</div><div class="line">// Dependency management</div><div class="line"><span class="function">dependencies</span>(conﬁg: Closure)</div><div class="line">conﬁ<span class="function">gurations</span>(conﬁg: Closure)</div><div class="line"><span class="function">getDependencies</span>()</div><div class="line">getConﬁ<span class="function">gurations</span>()</div><div class="line">//</div><div class="line">// Properties</div><div class="line"><span class="function">getAnt</span>()</div><div class="line"><span class="function">getName</span>()</div><div class="line"><span class="function">getDescription</span>()</div><div class="line"><span class="function">getGroup</span>()</div><div class="line"><span class="function">getPath</span>()</div><div class="line"><span class="function">getVersion</span>()</div><div class="line"><span class="function">getLogger</span>()</div><div class="line"><span class="function">setDescription</span>(description: String)</div><div class="line"><span class="function">setVersion</span>(version: Object)</div><div class="line">//</div><div class="line">// File creation</div><div class="line">ﬁ<span class="function">le</span>(path: Object)</div><div class="line">ﬁ<span class="function">les</span>(paths: Object...)</div><div class="line">ﬁ<span class="function">leTree</span>(baseDir: Object)</div><div class="line">//</div><div class="line">// Task creation</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String)</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String, c: Closure)</div><div class="line"><span class="function">task</span>(name: String)</div><div class="line"><span class="function">task</span>(name: String, c: Closure)</div><div class="line">// 示例</div><div class="line"><span class="function">setDescription</span>(<span class="string">"myProject"</span>)                       </div><div class="line">println <span class="string">"Description of project $name: "</span> + project.description</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/18/learning-gradle-in-action-ii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-pro-git-2nd" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/16/learning-pro-git-2nd/" class="article-date">
  	<time datetime="2014-11-16T12:52:47.000Z" itemprop="datePublished">11月 16 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/书籍/">书籍</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/16/learning-pro-git-2nd/">学习 Git（一）—— Pro Git 2nd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="起步">起步</h3>
<p><strong>Git 认知</strong></p>
<ul>
<li>Snapshots, Not Diff erences</li>
<li>Nearly Every Operation Is Local</li>
<li>Everything in Git is check-summed before it is stored and is then referred to by that checksum</li>
<li>Git Generally Only Adds Data</li>
<li>The Three States ：the Git directory, working directory, and the staging area</li>
<li>Git 基本工作流程 ：增删改（working directory）-&gt; 存储快照（staging area）-&gt; 提交（Git directory）</li>
<li>Git 文件状态 ：untracked、unmodified、modified、staged</li>
</ul>
<p><strong>配置 Git</strong></p>
<blockquote>
<p>/etc/gitconfig ：every user，$ git config —system<br>~/.gitconfig  or  ~/.config/git/config ：specified user, $ git config —global<br>.git/config ：specified repository, $ git config</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name <span class="string">"John Doe"</span></div><div class="line">$ git config --global user.email johndoe@example.com</div><div class="line">$ git config --global core.editor emacs		<span class="comment"># 默认 vim</span></div><div class="line">$ git config --list		<span class="comment"># $ git config user.name</span></div></pre></td></tr></table></figure>



<h3 id="实战（一）">实战（一）</h3>
<ul>
<li>新项目</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git init     <span class="comment"># 在某个项目目录里初始化一个 Git working directory -&gt; .git 目录</span></div><div class="line">$ git add *.c  <span class="comment"># 存储快照（staging area）</span></div><div class="line">$ git commit -m <span class="string">'initial project version'</span>  <span class="comment"># 提交</span></div><div class="line">$ git remote add origin https://github.com/username/example.git</div><div class="line">$ git push -u origin master</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/16/learning-pro-git-2nd/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-gradle-in-action-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/15/learning-gradle-in-action-i/" class="article-date">
  	<time datetime="2014-11-15T15:28:45.000Z" itemprop="datePublished">11月 15 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/15/learning-gradle-in-action-i/">学习 Gradle —— Java 下一代构建工具（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>高效软件工程的核心：自动化</strong><br>自动化构建类型及其进化史：请求式构建 -&gt; 触发式构建 -&gt; 计划式构建<br>自动化构建工具要素 ：任务（DAG - Directed Acyclic Graph，即一段可工作的构件单元 + 依赖）、依赖管理</p>
</blockquote>
<h3 id="Gradle_箴言">Gradle 箴言</h3>
<ul>
<li><strong>让不可行变得可行，让可行变得易行，让易行变得简洁</strong></li>
<li>Maven VS Gradle</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">			<span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">			<span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0</span></div><div class="line">				http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</div><div class="line">	<span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.mycompany.app<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>my-app<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></div></pre></td></tr></table></figure>



<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line"><span class="keyword">group</span> = <span class="string">'com.mycompany.app'</span></div><div class="line">archivesBaseName = <span class="string">'my-app'</span></div><div class="line">version = <span class="string">'1.0-SNAPSHOT'</span></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">	mavenCentral()</div><div class="line">}</div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">	testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/15/learning-gradle-in-action-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-jenkins-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/14/learning-jenkins-i/" class="article-date">
  	<time datetime="2014-11-14T15:19:11.000Z" itemprop="datePublished">11月 14 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/程序员日志/">程序员日志</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/14/learning-jenkins-i/">遇见 JenKins - 持续集成（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>一个程序员（工程师）的工作要是少了<strong>持续集成</strong>这一环节，他（她）就不能算是程序员。</p>
</blockquote>
<h3 id="JenKins_认知">JenKins 认知</h3>
<blockquote>
<p><strong>持续开发 -&gt; 持续测试 -&gt; 持续构建 -&gt; 持续部署/交付</strong></p>
</blockquote>
<p><strong>JenKins 是什么</strong></p>
<ul>
<li>持续性构建或测试软件工程</li>
<li>监控外部工作的执行</li>
</ul>
<p><strong>JenKins 最佳实践</strong></p>
<ul>
<li>安全性：强制采取认证和权限控制</li>
<li>周期性备份</li>
<li>使用“文件指纹”（file fingerprinting）管理（因交叉工程协作带来的）依赖性</li>
<li>最可靠的构建是清洁构建（clean builds，which are built fully from Source Code Control）</li>
<li>紧密结合问题追踪系统（如 JIRA 或 bugzilla）以减少手工维护变更记录的麻烦</li>
<li>紧密结合源代码浏览工具（如 FishEye），但前提是使用 Subversion 作为源代码版本管理工具</li>
<li>坚持对每一个构建生成趋势报告和进行自动化测试</li>
<li>为 JenKins 分配足够多的磁盘空间</li>
<li>为要移除的构建工作打包仓储</li>
<li>为不同的分支（维护或开发）都单独建立构建工作</li>
<li>为平行构建的工作分配不同的端口，但最好避免同时构建多个工程</li>
<li>使用 Email 功能以保持团队对开发工作的感知</li>
<li>分步式测试计划以保证失败地构建得以尽早上报（比如在整体套件测试之前进行嗅探性测试）</li>
<li>为构建工作制定维护计划，比如定期清理以避免磁盘耗尽</li>
<li>为成功的构建上标签，描述</li>
<li>Configure Jenkins bootstrapper to update your working copy prior to running the build goal/target</li>
<li>In larger systems, don’t build on the master（do this by setting the executor count to zero）</li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/14/learning-jenkins-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-life-daily-log-141114" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/14/life-daily-log-141114/" class="article-date">
  	<time datetime="2014-11-14T13:50:13.000Z" itemprop="datePublished">11月 14 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/随笔/">随笔</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生活记录/">生活记录</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/14/life-daily-log-141114/">生活点滴 - 20141114</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一直都想写些文章，写些有用的东西，记录那瞬间流逝的灵感，可是，整天“胡思乱想”，徒然增添烦恼，于是只好暂借圣贤先哲之训，一步步道来。</p>
<blockquote>
<p><strong>古之学者为己</strong>，一句话：说出你的心声！<br><strong>文章合为时而著，歌诗合为事而作</strong>：动机与激情！或为国，或为时政，或为民，或为家。</p>
</blockquote>
<p><strong>路漫漫其修远兮，吾将上下而求索</strong></p>
<hr>
<p>看完《看不见的战争》，心中忐忑不安，却又坦然可笑。</p>
<p>忐忑是担忧政府能否扛起国家公器，保卫家园；</p>
<p>不安是怕有生之年遭遇战乱，尤其年迈无力之时；</p>
<p>坦然是因为祖国正如初升太阳，冉冉升起，越来越强大；</p>
<p>可笑是这个世界的本来面目就是如此，过去发生过的，今天仍旧在发生，当然，未来还会发生。</p>
<hr>
<p>《环球人物》杂志：印度总理莫迪，百天要建530万厕所。</p>
<p>莫迪说：厕所先于神庙。绝妙口号！看来他是深知印度的病根在哪啊！<br>不过，一个国家领导人总是对厕所“念念不忘”，也是怪不容易的！</p>
<p>对了，BBC新的纪录片《生而不幸为印度女》中披露的令人憎恨和恶心的习俗和现象，也是一大问题，再来一句口号吧：尊重女性先于神庙。</p>
<hr>
<p>锻炼腹肌、三角肌和背阔肌已经有3个多礼拜了，祝贺下，坚持就是胜利。看着腹肌一块块慢慢变得明显，成就感还是杠杆的，不过，腹肌太难练了，而且真的很难坚持。</p>
<p>一</p>
<blockquote>
<p>以下是好料推荐：</p>
<ol>
<li>iOS应用Naeto App.: 让你直接在通知中心记录笔记！（尝鲜，目前Android没有哦，可考虑开发！）</li>
<li><a href="http://www.ltaaa.com/bbs/thread-93942-1-1.html" target="_blank" rel="external">访谈记录片《看不见的战争》（The War You Don’t See）</a></li>
<li>电影《月球》, 关键字：孤独与情感诉求，克隆人与归宿，资源争夺；感想：无以言表</li>
</ol>
</blockquote>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-udacity-software-debugging-cs259" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/13/udacity-software-debugging-cs259/" class="article-date">
  	<time datetime="2014-11-13T05:57:01.000Z" itemprop="datePublished">11月 13 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/程序员日志/">程序员日志</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件调试/">软件调试</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/13/udacity-software-debugging-cs259/">Udacity公开课：软件调试（优酷旁听）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a href="http://v.youku.com/v_show/id_XNTM5NzcyNzgw.html" target="_blank" rel="external">Udacity公开课:CS259软件调试</a></p>
</blockquote>
<h3 id="课程概览">课程概览</h3>
<blockquote>
<p><strong>目标</strong><br>如何系统化的调试<br>使用自动化调试工具<br>使用一系列试验，进行程序科学调试假设验证</p>
</blockquote>
<p><strong>大纲</strong></p>
<ol>
<li>调试如何工作？</li>
<li>断言实验</li>
<li>delta 自动化调试方法</li>
<li>程序 bug 如何产生</li>
<li>重复错误如何发生，统计调试错误源</li>
<li>信息挖掘 ：bug 数据库和变更数据库</li>
</ol>
<h3 id="第一节">第一节</h3>
<p><strong>序言：深夜调试</strong></p>
<ul>
<li>程序员手工调试的弊端：注意力有限，不集中；花费更多时间以致减少了和陪伴家人的时间；</li>
<li>软件工作量占比：测试和调试经常在 50% ~ 75%</li>
<li>调试的困难：无法估计</li>
</ul>
<p><strong>启程</strong></p>
<ul>
<li>处理 HTML 输出文本（tag 模式与有限状态机）；</li>
<li>简单例子<b>foo</b>：两种状态（tag、text）；</li>
<li>第一个漏洞，<a href=">">foo</a>：三种状态（tag、text 和 quote）</li>
<li>第二个漏洞，”<b>foo</b>“；</li>
<li>任意输出变量值调试：时间杀手！任意变更代码调试：混乱杀手！</li>
<li>《代码大全》- 历史：魔鬼调试指南；</li>
<li>修复调试；糊弄单元调试案例；</li>
<li><strong>程序变量的状态 -&gt; defect 感染点 -&gt; 感染点传染 -&gt; 错误；引发感染的情形 -&gt; 调试/测试的 cases</strong>；</li>
<li><strong>解决：科学假设 -&gt; 预测 -&gt; 试验 -&gt; 渐进式改进假设 —&gt; 理论</strong>；</li>
<li>假设I：简单测试，输入”foo” -&gt; “bar” -&gt; “”；（因果链）</li>
</ul>
<p>进度：Udacity公开课:CS259软件调试：01-29 你好断言</p>
<p><strong>未完待续</strong></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-iii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/13/android-interview-iii/" class="article-date">
  	<time datetime="2014-11-13T02:10:53.000Z" itemprop="datePublished">11月 13 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/13/android-interview-iii/">Android 面试题记录 （三）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_关于_Service_的一些细节">1. 关于 Service 的一些细节</h3>
<ul>
<li>Service 的种类：Started Service 和 Bound Service，分别对应于 Context.startService(Intent) 和 Context.bindService；</li>
<li>如果一个 Service 在 onStartCommand 执行的过程中被终止，则已提交的 Intent 将得不到机会启动，该 Intent 仍会被视为一个挂起的请求，而非一个已启动的请求（started request）；</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Started Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartedEatService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span>(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId) { ... }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="keyword">return</span> <span class="keyword">null</span>; }</div><div class="line">}</div><div class="line"><span class="comment">// return value of onStartCommand:</span></div><div class="line"><span class="comment">// 1. START_STICKY，Service 将以新进程的形式予以重新启动而不管是否有任何挂起的请求，</span></div><div class="line"><span class="comment">// 被终止的请求将不会重新提交，如果有挂起的请求，flags 值将被设置为 START_FLAG_RETRY，</span></div><div class="line"><span class="comment">// 如果没有任何挂起的请求，重新启动后，onStartCommand 的 Intent 值为 null；</span></div><div class="line"><span class="comment">// 2. START_NOT_STICKY，与上一个 flag 相同，但有一个区别是，Service 只在有挂起的请求时才重新启动；</span></div><div class="line"><span class="comment">// 3. START_REDELIVER_INTENT，将为那些挂起的请求或正在执行的而没有完成的请求重新启动，</span></div><div class="line"><span class="comment">// 其中挂起的请求，flags 值将设置为START_FLAG_RETRY，而未完成的请求则为 START_FLAG_REDELIVERY；</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="comment">/* Return communication interface */</span> }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onUnbind</span>(Intent intent) { <span class="comment">/* Last component has unbound */</span> }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>Local Binding</strong></p>

        
          <p class="article-more-link">
            <a href="/2014/11/13/android-interview-iii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/archives/2014/page/2/">2</a><a class="page-number" href="/archives/2014/page/3/">3</a><a class="page-number" href="/archives/2014/page/4/">4</a><a class="extend next" rel="next" href="/archives/2014/page/2/">Next &raquo;</a>
    </nav>
  

      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 月光独奏
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>