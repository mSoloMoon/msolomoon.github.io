<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tag: 软件开发 | 月光独奏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta property="og:type" content="website">
<meta property="og:title" content="月光独奏">
<meta property="og:url" content="http://yoursite.com/tags/软件开发/">
<meta property="og:site_name" content="月光独奏">
<meta property="og:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="月光独奏">
<meta name="twitter:description" content="五分死磕自己，六分懒惰，七分勤奋，八分安静，九分幻想，十分无趣">

  
    <link rel="alternative" href="/atom.xml" title="月光独奏" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">月光独奏</a></h1>
		</hgroup>

		
		<p class="header-subtitle">软件设计及开发者</p>
		

		
			<div class="onoffswitch">
			    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
			    <label class="onoffswitch-label" for="myonoffswitch">
			        <span class="onoffswitch-inner"></span>
			        <span class="onoffswitch-switch"></span>
			    </label>
			</div>
		

		<div class="switch-area">
			<section class="first-part">
				<nav class="header-menu">
					<ul>
					
						<li><a href="/">主页</a></li>
			        
						<li><a href="/archives">所有文章</a></li>
			        
						<li><a href="/categories/随笔">随笔</a></li>
			        
						<li><a href="/categories/摘录">摘录</a></li>
			        
						<li><a href="/categories/书籍">书籍</a></li>
			        
						<li><a href="/categories/Web">Web</a></li>
			        
						<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
			        
						<li><a href="/categories/java-android">Java/Android</a></li>
			        
						<li><a href="/categories/project">Project</a></li>
			        
						<li><a href="/categories/程序员日志">程序员日志</a></li>
			        
						<li><a href="/about">关于</a></li>
			        
					</ul>
				</nav>
				<nav class="header-nav">
					<div class="social">
						
							<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
				        
							<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
				        
							<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
				        
							<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
				        
					</div>
				</nav>
			</section>
			
			
			<section class="second-part">
				<div class="widget tagcloud">
					<a href="/tags/Android/" style="font-size: 14.44px;">Android</a><a href="/tags/C-C/" style="font-size: 11.11px;">C/C++</a><a href="/tags/Go/" style="font-size: 11.11px;">Go</a><a href="/tags/IT问题录/" style="font-size: 11.11px;">IT问题录</a><a href="/tags/IT面试/" style="font-size: 16.67px;">IT面试</a><a href="/tags/Java/" style="font-size: 15.56px;">Java</a><a href="/tags/Java-Web/" style="font-size: 11.11px;">Java Web</a><a href="/tags/书籍笔记/" style="font-size: 10.00px;">书籍笔记</a><a href="/tags/历史/" style="font-size: 11.11px;">历史</a><a href="/tags/哲学/" style="font-size: 11.11px;">哲学</a><a href="/tags/思考/" style="font-size: 14.44px;">思考</a><a href="/tags/持续部署/" style="font-size: 10.00px;">持续部署</a><a href="/tags/持续集成/" style="font-size: 15.56px;">持续集成</a><a href="/tags/摘录/" style="font-size: 15.56px;">摘录</a><a href="/tags/生活记录/" style="font-size: 17.78px;">生活记录</a><a href="/tags/软件开发/" style="font-size: 20.00px;">软件开发</a><a href="/tags/软件框架/" style="font-size: 12.22px;">软件框架</a><a href="/tags/软件调试/" style="font-size: 11.11px;">软件调试</a><a href="/tags/金融/" style="font-size: 11.11px;">金融</a><a href="/tags/随笔/" style="font-size: 18.89px;">随笔</a><a href="/tags/项目/" style="font-size: 13.33px;">项目</a>
				</div>
			</section>
			
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://msolo-programmer.qiniudn.com/msolo_me_square.png">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">月光独奏</a></h1>
			</hgroup>
			
			<p class="header-subtitle">软件设计及开发者</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/随笔">随笔</a></li>
		        
					<li><a href="/categories/摘录">摘录</a></li>
		        
					<li><a href="/categories/书籍">书籍</a></li>
		        
					<li><a href="/categories/Web">Web</a></li>
		        
					<li><a href="/categories/C-Cpp-Go">C/Cpp/Go</a></li>
		        
					<li><a href="/categories/java-android">Java/Android</a></li>
		        
					<li><a href="/categories/project">Project</a></li>
		        
					<li><a href="/categories/程序员日志">程序员日志</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/mSoloMoon" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://t.qq.com/zhengguangyu_msolo" title="weibo">weibo</a>
			        
						<a class="email" target="_blank" href="mailto://yuezhi.msolo@outlook.com" title="email">email</a>
			        
						<a class="qq" target="_blank" href="/212499714" title="qq">qq</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      
  
    <article id="post-project-stockeye-jenkins-calendarstock-lib" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/project-stockeye-jenkins-calendarstock-lib/" class="article-date">
  	<time datetime="2014-11-17T19:23:14.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/项目/">项目</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/project-stockeye-jenkins-calendarstock-lib/">持续集成之路 —— Stockeye CalendarStock 库开发实录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关键字 ：Jenkins、Gradle、JUnit、Jacoco、jar 包和库</strong></p>
</blockquote>
<h3 id="库项目结构">库项目结构</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">| build.gradle</div><div class="line">| src</div><div class="line">|   |- main</div><div class="line">|         |- java/com/msolo/stockeye/calendarstock/UtilCalTime.java</div><div class="line">|   |- test</div><div class="line">|         |- java/com/msolo/stockeye/calendarstock/UtilCalTimeTest.java</div></pre></td></tr></table></figure>

<h3 id="构建脚本（无_Jacoco）">构建脚本（无 Jacoco）</h3>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line">version = <span class="number">0.1</span></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">	mavenCentral()</div><div class="line">}</div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">	testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div><div class="line"><span class="keyword">task</span> libJavadocs(type: Javadoc) {</div><div class="line">	<span class="keyword">source</span> = <span class="keyword">sourceSets</span>.main.allJava</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Jenkins_项目配置（无_JaCoCo）">Jenkins 项目配置（无 JaCoCo）</h3>
<ul>
<li>项目名称：android_stockeye_cal_lib</li>
<li>源码管理：<a href="https://github.com/mSoloMoon/android_stockeye_calendar_lib.git" target="_blank" rel="external">https://github.com/mSoloMoon/android_stockeye_calendar_lib.git</a></li>
<li>构建触发器：Poll SCM -&gt; <em> </em> <em> </em> *</li>
<li>构建步骤1：Invoke Gradle script -&gt; Switch -&gt; clean build javadoc</li>
<li>构建后操作1：Publish JUnit test result report -&gt; XML -&gt; <em>*/build/test-results/</em>.xml</li>
<li>构建后操作2：Publish Javadoc -&gt; build/docs/javadoc/</li>
</ul>
<h3 id="持续集成（无_JaCoCo）">持续集成（无 JaCoCo）</h3>
<p><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_1.png" alt="项目首页"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_2.png" alt="测试结果总结"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_3.png" alt="控制台输出"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_4.png" alt="Javadoc"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_5.png" alt="工作空间"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_6.png" alt="JUnit报告1"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_7.png" alt="JUnit报告2"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_8.png" alt="生成的Jar包"></p>
<h3 id="构建脚本（增加_JaCoCo）">构建脚本（增加 JaCoCo）</h3>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// 增加的部分</div><div class="line">apply plugin: <span class="string">"jacoco"</span></div><div class="line">jacocoTestReport {</div><div class="line">    group = <span class="string">"reporting"</span></div><div class="line">    description = <span class="string">"Generate Jacoco coverage reports after running tests."</span></div><div class="line">    reports {</div><div class="line">        xml.enabled <span class="literal">true</span></div><div class="line">        html.enabled <span class="literal">true</span></div><div class="line">        csv.enabled <span class="literal">false</span></div><div class="line">    }</div><div class="line">    //classDirectories = fileTree(dir: <span class="string">'build/classes/main'</span>, include: <span class="string">'com/thc/**'</span>)</div><div class="line">    //<span class="built_in">source</span>Directories = fileTree(dir: <span class="string">'scr/java'</span>, include: <span class="string">'com/thc/**'</span>)</div><div class="line">    additionalSourceDirs = files(<span class="built_in">source</span>Sets.main.allJava.srcDirs)</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Jenkins_项目配置（增加_Jacoco）">Jenkins 项目配置（增加 Jacoco）</h3>
<ul>
<li>构建后操作3：Record JaCoCo coverage report</li>
<li>构建后操作4：E-mail Notification</li>
</ul>
<h3 id="持续集成（增加_JaCoCo）">持续集成（增加 JaCoCo）</h3>
<p><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_9.png" alt="项目首页"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_10.png" alt="Code Coverage report"><br><img src="https://msolomoon.github.io/images/Project_android_stockeye_cal_lib_11.png" alt="控制台输出"></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-gradle-in-action-ii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/18/learning-gradle-in-action-ii/" class="article-date">
  	<time datetime="2014-11-17T17:43:29.000Z" itemprop="datePublished">11月 18 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/18/learning-gradle-in-action-ii/">学习 Gradle —— Java 下一代构建工具（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>Gradle 构建生命期</strong><br>初始化阶段（initialization phase）：创建 Project 实例 -&gt;<br>配置阶段（configuration phase）：constructs a model representation of the tasks -&gt;<br>执行阶段（execution phase）</p>
</blockquote>
<h3 id="Gradle_构建脚本精要">Gradle 构建脚本精要</h3>
<blockquote>
<p>Gradle 构建的原理 -&gt; 基于 <strong>DDD（domain-driven design）</strong>进行建模。</p>
</blockquote>
<p><strong>构建模块</strong></p>
<ul>
<li>模块：项目（the Project interface）</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Build script conﬁguration</span></div><div class="line"><span class="function">apply</span>(options<span class="value">: Map&lt;String,?&gt;)</span></div><div class="line"><span class="function">buildscript</span>(conﬁg: Closure)</div><div class="line">//</div><div class="line">// Dependency management</div><div class="line"><span class="function">dependencies</span>(conﬁg: Closure)</div><div class="line">conﬁ<span class="function">gurations</span>(conﬁg: Closure)</div><div class="line"><span class="function">getDependencies</span>()</div><div class="line">getConﬁ<span class="function">gurations</span>()</div><div class="line">//</div><div class="line">// Properties</div><div class="line"><span class="function">getAnt</span>()</div><div class="line"><span class="function">getName</span>()</div><div class="line"><span class="function">getDescription</span>()</div><div class="line"><span class="function">getGroup</span>()</div><div class="line"><span class="function">getPath</span>()</div><div class="line"><span class="function">getVersion</span>()</div><div class="line"><span class="function">getLogger</span>()</div><div class="line"><span class="function">setDescription</span>(description: String)</div><div class="line"><span class="function">setVersion</span>(version: Object)</div><div class="line">//</div><div class="line">// File creation</div><div class="line">ﬁ<span class="function">le</span>(path: Object)</div><div class="line">ﬁ<span class="function">les</span>(paths: Object...)</div><div class="line">ﬁ<span class="function">leTree</span>(baseDir: Object)</div><div class="line">//</div><div class="line">// Task creation</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String)</div><div class="line"><span class="function">task</span>(args: Map&lt;String,?&gt;, name: String, c: Closure)</div><div class="line"><span class="function">task</span>(name: String)</div><div class="line"><span class="function">task</span>(name: String, c: Closure)</div><div class="line">// 示例</div><div class="line"><span class="function">setDescription</span>(<span class="string">"myProject"</span>)                       </div><div class="line">println <span class="string">"Description of project $name: "</span> + project.description</div></pre></td></tr></table></figure>

<blockquote>
<p>管理项目版本<br>def projectVersion = new ProjectVersion()<br>projectVersion.major = 0<br>projectVersion.minor = 1<br>projectVersion.release = false<br>version = projectVersion</p>
</blockquote>
<ul>
<li>模块：任务（the Task interface）: 默认新创建的任务类型 -&gt; org.gradle.api.DefaultTask，private</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Task dependencies</span></div><div class="line">dependsOn(tasks: Object...)</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Action deﬁnition</span></div><div class="line"><span class="keyword">doFirst</span>(action: Closure)</div><div class="line"><span class="keyword">doLast</span>(action: Closure)</div><div class="line">getActions()</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Input/output data declaration</span></div><div class="line">getInputs()</div><div class="line">getOutputs()</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Properties</span></div><div class="line">getAnt()</div><div class="line">getDescription()</div><div class="line">getEnabled()</div><div class="line">getGroup()</div><div class="line">setDescription(<span class="keyword">description</span>: String)</div><div class="line">setEnabled(enabled: <span class="keyword">boolean</span>)</div><div class="line">setGroup(<span class="keyword">group</span>: String)</div><div class="line"><span class="comment">// 清理任务</span></div><div class="line"><span class="keyword">task</span> first &lt;&lt; { <span class="keyword">println</span> <span class="string">"first"</span> }</div><div class="line"><span class="keyword">task</span> second &lt;&lt; { <span class="keyword">println</span> <span class="string">"second"</span> }</div><div class="line">first.finalizedBy second 	<span class="comment">// 执行完或单独执行任务 first 后会触发任务 second（由它进行清理）</span></div><div class="line"><span class="comment">// 配置 : 其定义中没有 Action 或其缩写 &lt;&lt;</span></div><div class="line">ext.versionFile = <span class="keyword">file</span>(<span class="string">'version.properties'</span>)   </div><div class="line"><span class="keyword">task</span> loadVersion {                     </div><div class="line">   <span class="keyword">project</span>.version = readVersion()</div><div class="line">}</div><div class="line">ProjectVersion readVersion() {</div><div class="line">   logger.quiet <span class="string">'Reading the version file.'</span></div><div class="line">   <span class="keyword">if</span>(!versionFile.exists()) {</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> GradleException(<span class="string">"Required version file does not exist: $versionFile.canonicalPath"</span>) </div><div class="line">   }</div><div class="line">   Properties versionProps = <span class="keyword">new</span> Properties() </div><div class="line">   versionFile.withInputStream { stream -&gt;  </div><div class="line">      versionProps.load(stream)</div><div class="line">   }</div><div class="line">   <span class="keyword">new</span> ProjectVersion(versionProps.major.<span class="keyword">toInteger</span>(), </div><div class="line">       versionProps.minor.<span class="keyword">toInteger</span>(), versionProps.release.toBoolean())</div><div class="line">}</div><div class="line"><span class="comment">// 声明任务的输入和输出</span></div><div class="line"><span class="keyword">task</span> makeReleaseVersion(<span class="keyword">group</span>: <span class="string">'versioning'</span>, <span class="keyword">description</span>: <span class="string">'Makes project a release version.'</span>) {    </div><div class="line">   <span class="comment">// inputs 和 outputs 在配置阶段执行</span></div><div class="line">   inputs.property(<span class="string">'release'</span>, version.release)           </div><div class="line">   outputs.<span class="keyword">file</span> versionFile                </div><div class="line">   <span class="keyword">doLast</span> {</div><div class="line">      version.release = <span class="keyword">true</span></div><div class="line">      <span class="keyword">ant</span>.propertyfile(<span class="keyword">file</span>: versionFile) {</div><div class="line">         entry(key: <span class="string">'release'</span>, type: <span class="string">'string'</span>, operation: <span class="string">'='</span>, value: <span class="string">'true'</span>)</div><div class="line">      }</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>自定义任务</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReleaseVersionTask</span> <span class="keyword">extends</span> <span class="title">DefaultTask</span> </span>{                 </div><div class="line">   <span class="annotation">@Input</span> Boolean release                    </div><div class="line">   <span class="annotation">@OutputFile</span> File destFile                 </div><div class="line">   ReleaseVersionTask() {</div><div class="line">      group = <span class="symbol">'versionin</span>g'                             </div><div class="line">      description = <span class="symbol">'Makes</span> project a release version.' </div><div class="line">   }</div><div class="line">   <span class="annotation">@TaskAction</span>                       </div><div class="line">   void start() {</div><div class="line">      project.version.release = <span class="keyword">true</span></div><div class="line">      ant.propertyfile(file: destFile) {</div><div class="line">         entry(key: <span class="symbol">'releas</span>e', <span class="keyword">type</span>: <span class="symbol">'strin</span>g', operation: '=', value: <span class="symbol">'tru</span>e')</div><div class="line">      }</div><div class="line">   }</div><div class="line">}</div><div class="line">task makeReleaseVersion(<span class="keyword">type</span>: ReleaseVersionTask) {     </div><div class="line">   release = version.release           </div><div class="line">   destFile = versionFile              </div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>额外属性（extra properties）: 使用 ext 命名空间</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">project.ext.<span class="variable">myProp =</span> 'myValue'      </div><div class="line">ext {                               </div><div class="line">   <span class="variable">someOtherProp =</span> <span class="number">123</span></div><div class="line">}</div><div class="line"><span class="keyword">assert</span> <span class="variable">myProp =</span>= 'myValue'              </div><div class="line">println project.someOtherProp           </div><div class="line">ext.<span class="variable">someOtherProp =</span> <span class="number">567</span></div></pre></td></tr></table></figure>

<ul>
<li>Gradle 属性单独定义示范</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 文件：gradle.properties</span></div><div class="line">exampleProp = myValue</div><div class="line">someOtherProp = <span class="number">455</span></div><div class="line"><span class="comment">// 文件：build.gradle</span></div><div class="line">assert <span class="keyword">project</span>.exampleProp == <span class="string">'myValue'</span></div><div class="line"><span class="keyword">task</span> printGradleProperty &lt;&lt; {</div><div class="line">   <span class="keyword">println</span> <span class="string">"Second property: $someOtherProp"</span></div><div class="line">}</div><div class="line"><span class="comment">// 命令行 ：-P 项目属性；-D 系统属性</span></div><div class="line"><span class="comment">// 环境属性 ：ORG_GRADLE_PROJECT_propertyName=someValue</span></div></pre></td></tr></table></figure>

<h2 id="#">#</h2>
<h2 id="#-1">#</h2>
<h2 id="#-2">#</h2>
<p>To do</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-pro-git-2nd" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/16/learning-pro-git-2nd/" class="article-date">
  	<time datetime="2014-11-16T12:52:47.000Z" itemprop="datePublished">11月 16 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/书籍/">书籍</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/16/learning-pro-git-2nd/">学习 Git（一）—— Pro Git 2nd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="起步">起步</h3>
<p><strong>Git 认知</strong></p>
<ul>
<li>Snapshots, Not Diff erences</li>
<li>Nearly Every Operation Is Local</li>
<li>Everything in Git is check-summed before it is stored and is then referred to by that checksum</li>
<li>Git Generally Only Adds Data</li>
<li>The Three States ：the Git directory, working directory, and the staging area</li>
<li>Git 基本工作流程 ：增删改（working directory）-&gt; 存储快照（staging area）-&gt; 提交（Git directory）</li>
<li>Git 文件状态 ：untracked、unmodified、modified、staged</li>
</ul>
<p><strong>配置 Git</strong></p>
<blockquote>
<p>/etc/gitconfig ：every user，$ git config —system<br>~/.gitconfig  or  ~/.config/git/config ：specified user, $ git config —global<br>.git/config ：specified repository, $ git config</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name <span class="string">"John Doe"</span></div><div class="line">$ git config --global user.email johndoe@example.com</div><div class="line">$ git config --global core.editor emacs		<span class="comment"># 默认 vim</span></div><div class="line">$ git config --list		<span class="comment"># $ git config user.name</span></div></pre></td></tr></table></figure>



<h3 id="实战（一）">实战（一）</h3>
<ul>
<li>新项目</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git init     <span class="comment"># 在某个项目目录里初始化一个 Git working directory -&gt; .git 目录</span></div><div class="line">$ git add *.c  <span class="comment"># 存储快照（staging area）</span></div><div class="line">$ git commit -m <span class="string">'initial project version'</span>  <span class="comment"># 提交</span></div><div class="line">$ git remote add origin https://github.com/username/example.git</div><div class="line">$ git push -u origin master</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/16/learning-pro-git-2nd/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-gradle-in-action-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/15/learning-gradle-in-action-i/" class="article-date">
  	<time datetime="2014-11-15T15:28:45.000Z" itemprop="datePublished">11月 15 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/15/learning-gradle-in-action-i/">学习 Gradle —— Java 下一代构建工具（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>高效软件工程的核心：自动化</strong><br>自动化构建类型及其进化史：请求式构建 -&gt; 触发式构建 -&gt; 计划式构建<br>自动化构建工具要素 ：任务（DAG - Directed Acyclic Graph，即一段可工作的构件单元 + 依赖）、依赖管理</p>
</blockquote>
<h3 id="Gradle_箴言">Gradle 箴言</h3>
<ul>
<li><strong>让不可行变得可行，让可行变得易行，让易行变得简洁</strong></li>
<li>Maven VS Gradle</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">			<span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">			<span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0</span></div><div class="line">				http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</div><div class="line">	<span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.mycompany.app<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>my-app<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></div></pre></td></tr></table></figure>



<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line"><span class="keyword">group</span> = <span class="string">'com.mycompany.app'</span></div><div class="line">archivesBaseName = <span class="string">'my-app'</span></div><div class="line">version = <span class="string">'1.0-SNAPSHOT'</span></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">	mavenCentral()</div><div class="line">}</div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">	testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div></pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/11/15/learning-gradle-in-action-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-learning-jenkins-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/14/learning-jenkins-i/" class="article-date">
  	<time datetime="2014-11-14T15:19:11.000Z" itemprop="datePublished">11月 14 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/程序员日志/">程序员日志</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/14/learning-jenkins-i/">遇见 JenKins - 持续集成（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>一个程序员（工程师）的工作要是少了<strong>持续集成</strong>这一环节，他（她）就不能算是程序员。</p>
</blockquote>
<h3 id="JenKins_认知">JenKins 认知</h3>
<blockquote>
<p><strong>持续开发 -&gt; 持续测试 -&gt; 持续构建 -&gt; 持续部署/交付</strong></p>
</blockquote>
<p><strong>JenKins 是什么</strong></p>
<ul>
<li>持续性构建或测试软件工程</li>
<li>监控外部工作的执行</li>
</ul>
<p><strong>JenKins 最佳实践</strong></p>
<ul>
<li>安全性：强制采取认证和权限控制</li>
<li>周期性备份</li>
<li>使用“文件指纹”（file fingerprinting）管理（因交叉工程协作带来的）依赖性</li>
<li>最可靠的构建是清洁构建（clean builds，which are built fully from Source Code Control）</li>
<li>紧密结合问题追踪系统（如 JIRA 或 bugzilla）以减少手工维护变更记录的麻烦</li>
<li>紧密结合源代码浏览工具（如 FishEye），但前提是使用 Subversion 作为源代码版本管理工具</li>
<li>坚持对每一个构建生成趋势报告和进行自动化测试</li>
<li>为 JenKins 分配足够多的磁盘空间</li>
<li>为要移除的构建工作打包仓储</li>
<li>为不同的分支（维护或开发）都单独建立构建工作</li>
<li>为平行构建的工作分配不同的端口，但最好避免同时构建多个工程</li>
<li>使用 Email 功能以保持团队对开发工作的感知</li>
<li>分步式测试计划以保证失败地构建得以尽早上报（比如在整体套件测试之前进行嗅探性测试）</li>
<li>为构建工作制定维护计划，比如定期清理以避免磁盘耗尽</li>
<li>为成功的构建上标签，描述</li>
<li>Configure Jenkins bootstrapper to update your working copy prior to running the build goal/target</li>
<li>In larger systems, don’t build on the master（do this by setting the executor count to zero）</li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/14/learning-jenkins-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-udacity-software-debugging-cs259" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/13/udacity-software-debugging-cs259/" class="article-date">
  	<time datetime="2014-11-13T05:57:01.000Z" itemprop="datePublished">11月 13 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/程序员日志/">程序员日志</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件调试/">软件调试</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/13/udacity-software-debugging-cs259/">Udacity公开课：软件调试（优酷旁听）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a href="http://v.youku.com/v_show/id_XNTM5NzcyNzgw.html" target="_blank" rel="external">Udacity公开课:CS259软件调试</a></p>
</blockquote>
<h3 id="课程概览">课程概览</h3>
<blockquote>
<p><strong>目标</strong><br>如何系统化的调试<br>使用自动化调试工具<br>使用一系列试验，进行程序科学调试假设验证</p>
</blockquote>
<p><strong>大纲</strong></p>
<ol>
<li>调试如何工作？</li>
<li>断言实验</li>
<li>delta 自动化调试方法</li>
<li>程序 bug 如何产生</li>
<li>重复错误如何发生，统计调试错误源</li>
<li>信息挖掘 ：bug 数据库和变更数据库</li>
</ol>
<h3 id="第一节">第一节</h3>
<p><strong>序言：深夜调试</strong></p>
<ul>
<li>程序员手工调试的弊端：注意力有限，不集中；花费更多时间以致减少了和陪伴家人的时间；</li>
<li>软件工作量占比：测试和调试经常在 50% ~ 75%</li>
<li>调试的困难：无法估计</li>
</ul>
<p><strong>启程</strong></p>
<ul>
<li>处理 HTML 输出文本（tag 模式与有限状态机）；</li>
<li>简单例子<b>foo</b>：两种状态（tag、text）；</li>
<li>第一个漏洞，<a href=">">foo</a>：三种状态（tag、text 和 quote）</li>
<li>第二个漏洞，”<b>foo</b>“；</li>
<li>任意输出变量值调试：时间杀手！任意变更代码调试：混乱杀手！</li>
<li>《代码大全》- 历史：魔鬼调试指南；</li>
<li>修复调试；糊弄单元调试案例；</li>
<li><strong>程序变量的状态 -&gt; defect 感染点 -&gt; 感染点传染 -&gt; 错误；引发感染的情形 -&gt; 调试/测试的 cases</strong>；</li>
<li><strong>解决：科学假设 -&gt; 预测 -&gt; 试验 -&gt; 渐进式改进假设 —&gt; 理论</strong>；</li>
<li>假设I：简单测试，输入”foo” -&gt; “bar” -&gt; “”；（因果链）</li>
</ul>
<p>进度：Udacity公开课:CS259软件调试：01-29 你好断言</p>
<p><strong>未完待续</strong></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-iii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/13/android-interview-iii/" class="article-date">
  	<time datetime="2014-11-13T02:10:53.000Z" itemprop="datePublished">11月 13 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/13/android-interview-iii/">Android 面试题记录 （三）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_关于_Service_的一些细节">1. 关于 Service 的一些细节</h3>
<ul>
<li>Service 的种类：Started Service 和 Bound Service，分别对应于 Context.startService(Intent) 和 Context.bindService；</li>
<li>如果一个 Service 在 onStartCommand 执行的过程中被终止，则已提交的 Intent 将得不到机会启动，该 Intent 仍会被视为一个挂起的请求，而非一个已启动的请求（started request）；</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Started Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartedEatService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span>(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId) { ... }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="keyword">return</span> <span class="keyword">null</span>; }</div><div class="line">}</div><div class="line"><span class="comment">// return value of onStartCommand:</span></div><div class="line"><span class="comment">// 1. START_STICKY，Service 将以新进程的形式予以重新启动而不管是否有任何挂起的请求，</span></div><div class="line"><span class="comment">// 被终止的请求将不会重新提交，如果有挂起的请求，flags 值将被设置为 START_FLAG_RETRY，</span></div><div class="line"><span class="comment">// 如果没有任何挂起的请求，重新启动后，onStartCommand 的 Intent 值为 null；</span></div><div class="line"><span class="comment">// 2. START_NOT_STICKY，与上一个 flag 相同，但有一个区别是，Service 只在有挂起的请求时才重新启动；</span></div><div class="line"><span class="comment">// 3. START_REDELIVER_INTENT，将为那些挂起的请求或正在执行的而没有完成的请求重新启动，</span></div><div class="line"><span class="comment">// 其中挂起的请求，flags 值将设置为START_FLAG_RETRY，而未完成的请求则为 START_FLAG_REDELIVERY；</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> IBinder <span class="title">onBind</span>(Intent intent) { <span class="comment">/* Return communication interface */</span> }</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onUnbind</span>(Intent intent) { <span class="comment">/* Last component has unbound */</span> }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>Local Binding</strong></p>

        
          <p class="article-more-link">
            <a href="/2014/11/13/android-interview-iii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-ii" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/12/android-interview-ii/" class="article-date">
  	<time datetime="2014-11-12T03:04:46.000Z" itemprop="datePublished">11月 12 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/12/android-interview-ii/">Android 面试题记录（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_管理基本线程的生命期">1. 管理基本线程的生命期</h3>
<p><strong>生命期</strong> ：New -&gt; Runnable -&gt; Blocked/Waiting（Thread.sleep() | Thread.yield()） -&gt; Terminated</p>
<p>Uncaught Exceptions</p>
<ul>
<li>Thread global handler：static void setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler handler);</li>
<li>Thread local handler：void setUncaughtExceptionHandler(Thread.UncaughtExceptionHandler handler);</li>
<li>Unhandled Exceptions on the UI Thread，参见<a href="http://msolomoon.github.io/2014/11/09/android-interview-i/" target="_blank" rel="external">面试题记录（一）</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>() {</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Unexpected error occurred"</span>);</div><div class="line">    }</div><div class="line">});</div><div class="line">t.setUncaughtExceptionHandler(<span class="keyword">new</span> Thread.UncaughtExceptionHandler() {</div><div class="line">    <span class="annotation">@Override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span>(Thread thread, Throwable throwable) {</div><div class="line">        <span class="comment">// A basic logging of the message. Could be replaced by log to file or a network post.</span></div><div class="line">        Log.d(TAG, throwable.toString());</div><div class="line">    }</div><div class="line">});</div><div class="line">t.start();</div></pre></td></tr></table></figure>

<p><strong>在 Activity 中保持线程</strong></p>
<ul>
<li>public Object onRetainNonConfigurationInstance()：Called by the platform before a configuration change occurs, the implementation should return any object that you want to be retained across a configuration change (e.g., a thread) and passed to the new  Activity object.</li>
<li>public Object getLastNonConfigurationInstance()：Called by the platform before a configuration change occurs, it can be called in onCreate or onStart and returns null if the Activity is started for another reason than a configuration change.  </li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/12/android-interview-ii/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-begin-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/09/begin-hello-world/" class="article-date">
  	<time datetime="2014-11-09T06:50:50.000Z" itemprop="datePublished">11月 9 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-Cpp-Go/">C-Cpp-Go</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/09/begin-hello-world/">程序员的自我修养 - 从Hello World！说起</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>计算机科学领域的任何问题都可以通过增加一个间接的中间层来解决。</p>
</blockquote>
<h3 id="背景知识">背景知识</h3>
<ul>
<li>不要让CPU打盹：分时多任务、进程、抢占式分配CPU；</li>
<li>磁盘：扇区、LBS（逻辑扇区号）、文件系统;</li>
<li>内存不够怎么办：1. 分段（解决地址空间不隔离）；2. 分页【页大小、虚拟页/物理页、页错误和MMU(虚拟地址到物理地址的转换)】（解决使用效率低）;</li>
<li>线程：一个进程由一个或多个线程组成；一个标准的线程由线程ID、当前指令指针（PC）、寄存器集合和堆栈组成；状态（就绪、运行、等待）；Linux的多线程（fork、exec和clone、写时复制）；</li>
<li>线程安全：竞争与原子操作、同步与锁（二元信号量和信号量【即多元信号量】、互斥量和临界区、读写锁、条件变量）；可重入；</li>
<li>volatile：阻止编译器为了提高速度将一个变量缓存到寄存器内而不写回；</li>
<li>对象构造（pInst = new PInst()）包含三个顺序的步骤：1. 分配内存；2. 在内存的位置上调用构造函数；3. 将内存的地址赋值给pInst；【在上述三个步骤中，CPU完全有可能动态调整2和3的执行顺序！】</li>
<li>线程并发模型：1. 一对一模型；2. 多对一模型（将多个用户线程映射到一个内核线程上）；3. 多对多模型； </li>
</ul>
<h3 id="Hello_World_程序构建">Hello World 程序构建</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="keyword">int</span> main() </div><div class="line">{</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"Hello World!"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>初级：</strong></p>
<ol>
<li>预处理: $ gcc -E hello.c -o hello.i 或 $ cpp hello.c &gt; hello.i</li>
<li>编译: $ gcc -S hello.i -o hello.s（现在版本的 GCC 把预处理和编译两个步骤合并成一个步骤，使用一个cc1的程序。）</li>
<li>汇编：$ as hello.s -o hello.o 或 $ gcc -c hello.s -o hello.o（根据汇编指令和机器指令的对照表一一翻译即可。）</li>
<li>链接：$ ld -static /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/gcc/i486-linux-gnu/4.1.3/crtbeginT.o -L/usr/lib/gcc/1486-linux-gnu/4.1.3 -L/usr/lib -L/lib hello.o —start-group -lgcc -lgcc_eh -lc —end-group /usr/lib/gcc/i486-linux-gnu/4.1.3/crtend.o /usr/lib/crtn.o</li>
</ol>

        
          <p class="article-more-link">
            <a href="/2014/11/09/begin-hello-world/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-android-interview-i" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/09/android-interview-i/" class="article-date">
  	<time datetime="2014-11-08T18:18:48.000Z" itemprop="datePublished">11月 9 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/java-android/">java-android</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IT面试/">IT面试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/09/android-interview-i/">Android 面试题纪录（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="目录">目录</h3>
<ol>
<li>JVM和DVM的不同</li>
<li>Android如何启动一个应用</li>
<li>UI Thread 如何工作</li>
<li>UI Thread 消息机制 API 概览</li>
<li>阐述 MessageQueue.IdleHandler</li>
<li>Android 平台如何调度线程</li>
<li>Android下线程有哪些通信方式</li>
<li>进程间如何通信</li>
<li>Android 如何管理内存 </li>
</ol>
<p><br></p>
<h3 id="1-_JVM和DVM的不同">1. JVM和DVM的不同</h3>
<ul>
<li>JVM is a stack-based machine; while DVM is register-based（执行相同任务比JVM使用更少的指令）;</li>
<li>A stack-based virtual machine must transfer data from registers to the operand stack before manipulating them. In contrast, a register-based VM operates by directly using virtual registers. This increases the relative size of instructions because they must specify which registers to use, but reduces the number of instructions that must be executed to achieve the same result.</li>
</ul>
<h3 id="2-_Android如何启动一个应用">2. Android如何启动一个应用</h3>
<p><img src="https://msolomoon.github.io/images/Zygote_VM_Startup.png" alt="Zygote启动应用流程"></p>
<ul>
<li>Android启动时将率先运行一个独特的进程<strong>Zygote</strong>。而Zygote将启动一虚拟机，该虚拟机将预先加载Android核心库并初始化各种共享资源体，最后它将使用套接字进行监听。 </li>
<li>当用户启动一个Android应用时，Zygote将创建一个虚拟机以便其运行。它通过写时复制（Copy-On-Write）的技术拷贝Zygote虚拟机并以子进程的身份和其父进程共享内存实现的。</li>
</ul>

        
          <p class="article-more-link">
            <a href="/2014/11/09/android-interview-i/#more">more >></a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/tags/软件开发/page/2/">2</a><a class="extend next" rel="next" href="/tags/软件开发/page/2/">Next &raquo;</a>
    </nav>
  

      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 月光独奏
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>